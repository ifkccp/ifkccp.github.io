<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[架构人生]]></title>
  <subtitle><![CDATA[成长之路]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://ls-la.me/"/>
  <updated>2015-03-25T03:48:08.000Z</updated>
  <id>http://ls-la.me/</id>
  
  <author>
    <name><![CDATA[我叫小井]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[清除CNNIC证书]]></title>
    <link href="http://ls-la.me/2015/03/25/fuck-cnnic/"/>
    <id>http://ls-la.me/2015/03/25/fuck-cnnic/</id>
    <published>2015-03-25T03:24:24.000Z</published>
    <updated>2015-03-25T03:48:08.000Z</updated>
    <content type="html"><![CDATA[<p>昨天看到<a href="http://www.williamlong.info/archives/4183.html" target="_blank" rel="external">这个消息</a>，说CNNIC发布中间人攻击证书，决定把CNNIC设为不信任。下边提供网上找到的方法：</p>
<h3 id="Windows:">Windows:</h3><ol>
<li>运行<code>certmsg.msc</code>证书管理器。</li>
<li>选择<code>受信任的根证书颁发机构</code> -&gt; <code>证书</code>，如果在右边能找到<code>CNNIC</code>的证书，将其导入到<code>不信任的证书</code>中。</li>
<li>如果没有，先下载这<a href="/files/CNNIC.zip">三个证书</a>，在证书上点右键，安装，安装位置选择 <code>不信任的证书</code>。<br><img src="http://ww4.sinaimg.cn/large/00651KUrgw1eqhslrgf7aj30e40bwabx.jpg" alt=""></li>
<li>最后在证书管理器中找到这些证书，右键属性，选中 <code>禁用此证书的所有目的</code>。</li>
</ol>
<h3 id="Mac:">Mac:</h3><p>按图所示找到CNNIC证书，双击设为不信任即可。<br><img src="http://ww4.sinaimg.cn/large/00651KUrgw1eqht50jvexj30vu0jwqae.jpg" alt=""></p>
<p>然后打开这个网站测试，提示证书不信任就对了： <a href="https://www.cnnic.cn" target="_blank" rel="external">https://www.cnnic.cn</a>。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>昨天看到<a href="http://www.williamlong.info/archives/4183.html" target="_blank" rel="external">这个消息</a>，说CNNIC发布中间人攻击证书，决定把CNNIC设为不信任。下边提供网上]]>
    </summary>
    
      <category term="CA" scheme="http://ls-la.me/tags/CA/"/>
    
      <category term="CNNIC" scheme="http://ls-la.me/tags/CNNIC/"/>
    
      <category term="security" scheme="http://ls-la.me/categories/security/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在VirtualBox的共享目录下创建软链接]]></title>
    <link href="http://ls-la.me/2015/03/24/symlinks-within-shared-folders-in-VirtualBox/"/>
    <id>http://ls-la.me/2015/03/24/symlinks-within-shared-folders-in-VirtualBox/</id>
    <published>2015-03-24T07:41:38.000Z</published>
    <updated>2015-03-24T08:17:01.000Z</updated>
    <content type="html"><![CDATA[<p>准备在Mac的VirtualBox里搭建hexo环境，由于需要用到md编辑，所以项目目录需要放在共享目录下，方便使用md编辑器。在安装过程中 <code>npm install</code> 的时候总是报错，究其原因，是在共享目录下没有权限创建软链接。详细说明见<a href="https://www.virtualbox.org/ticket/10085" target="_blank" rel="external">这里</a>，下边给出解决办法。</p>
<p>先关闭虚拟机，注意是关闭(<code>shutdown</code>)，不是暂停(<code>pause</code>)或者(<code>save state</code>)。<br>然后打开mac的shell，执行：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span><span class="constant">VBoxManage </span>setextradata <span class="constant">MACHINE_LABEL VBoxInternal2/SharedFoldersEnableSymlinksCreate/SHARE_LABEL </span><span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>注意这里的 <code>MACHINE_LABEL</code> 是你给虚拟机取的名字，比如我的就叫做 <code>centos7_pure</code>，<code>SHARE_LABEL</code> 是共享目录的名字，比如我的叫 <code>vmdir</code>。</p>
<p>设置好之后检查是否生效：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span><span class="constant">VBoxManage </span>getextradata <span class="constant">MACHINE_LABEL </span>enumerate</span><br></pre></td></tr></table></figure></p>
<p>现在启动虚拟机，挂载共享目录，就可以继续 <code>npm install</code> 了。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>准备在Mac的VirtualBox里搭建hexo环境，由于需要用到md编辑，所以项目目录需要放在共享目录下，方便使用md编辑器。在安装过程中 <code>npm install</code> 的时候总是报错，究其原因，是在共享目录下没有权限创建软链接。详细说明见<a hre]]>
    </summary>
    
      <category term="Mac" scheme="http://ls-la.me/tags/Mac/"/>
    
      <category term="VirtualBox" scheme="http://ls-la.me/tags/VirtualBox/"/>
    
      <category term="Mac" scheme="http://ls-la.me/categories/Mac/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Mac下设置VirtualBox的80端口转发]]></title>
    <link href="http://ls-la.me/2015/03/24/port-forwarding-for-virtualbox-on-mac/"/>
    <id>http://ls-la.me/2015/03/24/port-forwarding-for-virtualbox-on-mac/</id>
    <published>2015-03-24T06:21:42.000Z</published>
    <updated>2015-03-24T08:11:59.000Z</updated>
    <content type="html"><![CDATA[<p>Mac 抹盘装完 Yosemite 之后所有的开发环境全部都需要重新搭建，索性弄个虚拟机然后环境全部扔进去得了。反正机器本身没啥好备份的，以后再装系统就只备份虚拟机就行。</p>
<p>由于本身不是root用户，虚拟机的开不了80端口，需要在主机上做点配置 (VirtualBox已经把虚拟机的80端口转发到了Mac的8080端口)：</p>
<p><img src="http://ww3.sinaimg.cn/mw690/00651KUrgw1eqgud42grsj30gf02owf3.jpg" alt="VirtualBox"></p>
<p>开始：<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo -i</span><br><span class="line"><span class="preprocessor"># echo "rdr pass on lo0 inet proto tcp from any to any port 80 -&gt; 127.0.0.1 port 8080" &gt; /etc/pf.anchors/vbox</span></span><br><span class="line"><span class="preprocessor"># vi /etc/pf.conf</span></span><br></pre></td></tr></table></figure></p>
<p>在文件尾添加下边两行:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rdr-anchor <span class="string">"vbox"</span></span><br><span class="line"><span class="built_in">load</span> anchor <span class="string">"vbox"</span> <span class="built_in">from</span> <span class="string">"/etc/pf.anchors/vbox"</span></span><br></pre></td></tr></table></figure>
<p>使配置生效：<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># pfctl -ef /etc/pf.conf</span></span><br></pre></td></tr></table></figure></p>
<p>现在即可打开浏览器，不用加端口访问虚拟机里的web项目了。</p>
<p>添加开机启动需要编辑文件 <code>/System/Library/LaunchDaemons/com.apple.pfctl.plist</code>，添加第二行 (-e这一行)：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">string</span>&gt;pfctl&lt;/<span class="built_in">string</span>&gt;</span><br><span class="line">&lt;<span class="built_in">string</span>&gt;-<span class="keyword">e</span>&lt;/<span class="built_in">string</span>&gt;</span><br><span class="line">&lt;<span class="built_in">string</span>&gt;-<span class="keyword">f</span>&lt;/<span class="built_in">string</span>&gt;</span><br><span class="line">&lt;<span class="built_in">string</span>&gt;/etc/pf.<span class="keyword">conf</span>&lt;/<span class="built_in">string</span>&gt;</span><br></pre></td></tr></table></figure>
<p>参考：<a href="http://rabbit52.com/2014/desktopos/mac/yosemite-port-forwarding-at-startup" target="_blank" rel="external">Yosemite 开机启动设置端口转发</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Mac 抹盘装完 Yosemite 之后所有的开发环境全部都需要重新搭建，索性弄个虚拟机然后环境全部扔进去得了。反正机器本身没啥好备份的，以后再装系统就只备份虚拟机就行。</p>
<p>由于本身不是root用户，虚拟机的开不了80端口，需要在主机上做点配置 (Virtual]]>
    </summary>
    
      <category term="Mac" scheme="http://ls-la.me/tags/Mac/"/>
    
      <category term="VirtualBox" scheme="http://ls-la.me/tags/VirtualBox/"/>
    
      <category term="Mac" scheme="http://ls-la.me/categories/Mac/"/>
    
  </entry>
  
</feed>